<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Style="{StaticResource ContentPageStyle}"
             x:Class="Athena.UI.SearchResultView"
             xmlns:loc="clr-namespace:Athena.Resources.Localization"
             xmlns:sf="clr-namespace:Syncfusion.Maui.ListView;assembly=Syncfusion.Maui.ListView"
             Title="{x:Static loc:Localization.SearchResults}">
    <Grid>
        <sf:SfListView 
               SelectionMode="Single"
               EmptyView="{x:Static loc:Localization.SearchNoResults}"
               ItemSize="80"
               x:Name="searchResultView"
               SelectionChanged="SearchResultView_OnSelectionChanged"
               Margin="5"
               ItemsSource="{Binding SearchResult}">
            <sf:SfListView.ItemTemplate>
                <DataTemplate >
                    <Border StrokeShape="RoundRectangle 5" BackgroundColor="White" Margin="0, 0, 0, 3">
                        <VerticalStackLayout Margin="5" BackgroundColor="White">

                            <Label Text="{Binding Snippet}"
                       FontSize="16"
                       TextType="Html"
                       LineBreakMode="TailTruncation"/>
                            <Label>
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span  FontSize="12" TextColor="Gray" Text="{x:Static loc:Localization.SearchResultFolder}" />
                                        <Span  FontSize="12" TextColor="Gray" FontAttributes="Bold" Text="{Binding Folder.Name}" />
                                        <!--TODO IF ROOT?-->
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>

                            <Label>
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span  FontSize="12" TextColor="Gray" Text="{x:Static loc:Localization.SearchResultDocument}" />
                                        <Span  FontSize="12" TextColor="Gray" FontAttributes="Bold" Text="{Binding Document.Name}" />
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>

                        </VerticalStackLayout>
                    </Border>
                </DataTemplate>
            </sf:SfListView.ItemTemplate>
        </sf:SfListView>
    </Grid>
</ContentPage>
